"use strict";function unused(){}!function(){if(!("onload"in XMLHttpRequest.prototype)||navigator.standalone)return;const t=["standalone","fullscreen","minimal-ui"],e=navigator.userAgent||"",n=navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")&&(-1!==e.indexOf("Mobile/")||"standalone"in navigator),o=Boolean(e.match(/(MSIE |Edge\/|Trident\/)/)),i="undefined"!=typeof Windows;let a;try{a=window.sessionStorage}catch(t){}function r(t,e){const n="__pwacompat_"+t;return void 0!==e&&(a[n]=e),a[n]}function c(){const t=document.head.querySelector('link[rel="manifest"]'),e=t?t.href:"";if(!e)throw'can\'t find <link rel="manifest" href=".." />\'';const n=function(t){for(let e=0;e<t.length;++e){const n=t[e];try{return new URL("",n),t=>new URL(t||"",n).toString()}catch(t){}}return t=>t||""}([e,window.location]),o=r("manifest");if(o){try{d(JSON.parse(o),n)}catch(t){console.warn("PWACompat error",t)}return}const i=new XMLHttpRequest;i.open("GET",e),i.withCredentials="use-credentials"===t.getAttribute("crossorigin"),i.onload=()=>{try{const t=JSON.parse(i.responseText);r("manifest",i.responseText),d(t,n)}catch(t){console.warn("PWACompat error",t)}},i.send(null)}function l(t,e){const n=document.createElement(t);for(const t in e)n.setAttribute(t,e[t]);return document.head.appendChild(n),n}function s(t,e){e&&(!0===e&&(e="yes"),l("meta",{name:t,content:e}))}function u(t){const e=t.sizes.split(/\s+/g).map(t=>"any"===t?1/0:parseInt(t,10)||0);return Math.max(...e)}function d(e,a){const c=e.icons||[],d=c.filter(t=>(t.purpose||"").includes("maskable"));c.sort((t,e)=>u(e)-u(t)),d.sort((t,e)=>u(e)-u(t));const f=(d.length>0?d:c).map(t=>{const e={rel:"icon",href:a(t.src),sizes:t.sizes};if(l("link",e),n)return u(t)<120?void 0:(e.rel="apple-touch-icon",l("link",e))}).filter(Boolean),w=document.head.querySelector('meta[name="viewport"]'),b=w&&w.content||"",v=Boolean(b.match(/\bviewport-fit\s*=\s*cover\b/)),y=e.display,S=-1!==t.indexOf(y);if(s("mobile-web-app-capable",S),function(t,e){if(!n&&!i)return;const o=h(t);if(n){s("apple-mobile-web-app-status-bar-style",e?"black-translucent":o?"black":"default")}else{const e=function(){try{return Windows.UI.ViewManagement.ApplicationView.getForCurrentView().titleBar}catch(t){}}();if(!e)return;e.foregroundColor=p(o?"black":"white"),e.backgroundColor=p(t)}}(e.theme_color||"black",v),o){s("application-name",e.short_name),s("msapplication-tooltip",e.description),s("msapplication-starturl",a(e.start_url||".")),s("msapplication-navbutton-color",e.theme_color);const t=c[0];t&&s("msapplication-TileImage",a(t.src)),s("msapplication-TileColor",e.background_color)}if(document.head.querySelector('[name="theme-color"]')||s("theme-color",e.theme_color),!n){const t=(x=e.orientation,{por:"portrait",lan:"landscape"}[String(x||"").substr(0,3)]||"");return s("x5-orientation",t),s("screen-orientation",t),void("fullscreen"===y?(s("x5-fullscreen","true"),s("full-screen","yes")):S&&(s("x5-page-mode","app"),s("browsermode","application")))}var x;const k=e.background_color||"#f8f9fa",_=h(k),C=function(t){let e;return(t||[]).filter(t=>"itunes"===t.platform).forEach(t=>{if(t.id)e=t.id;else{const n=t.url.match(/id(\d+)/);n&&(e=n[1])}}),e}(e.related_applications);function O(t,n,o,i){const a=window.devicePixelRatio,r=g({width:t*a,height:n*a});if(r.scale(a,a),r.fillStyle=k,r.fillRect(0,0,t,n),r.translate(t/2,(n-32)/2),i){let t=i.width/a,e=i.height/a;e>128&&(t/=e/128,e=128),t>=48&&e>=48&&(r.drawImage(i,t/-2,e/-2,t,e),r.translate(0,e/2+32))}r.fillStyle=_?"white":"black",r.font="24px HelveticaNeue-CondensedBold";const c=e.name||e.short_name||document.title,l=r.measureText(c).width;if(l<.8*t)r.fillText(c,l/-2,0);else{const e=c.split(/\s+/g);for(let n=1;n<=e.length;++n){const o=e.slice(0,n).join(" "),i=r.measureText(o).width;(n===e.length||i>.6*t)&&(r.fillText(o,i/-2,0),r.translate(0,1.2*24),e.splice(0,n),n=0)}}return()=>{const t=r.canvas.toDataURL();return T(o,t),t}}function T(t,e){const n=document.createElement("link");n.setAttribute("rel","apple-touch-startup-image"),n.setAttribute("media",`(orientation: ${t})`),n.setAttribute("href",e),document.head.appendChild(n)}C&&s("apple-itunes-app","app-id="+C),s("apple-mobile-web-app-capable",S),s("apple-mobile-web-app-title",e.short_name||e.name);const A=r("iOS");if(A)try{const t=JSON.parse(A);return T("portrait",t.p),T("landscape",t.l),void f.forEach(e=>{const n=t.i[e.href];n&&(e.href=n)})}catch(t){}const E={i:{}};function I(t,e){const n=window.screen,o=O(n.availWidth,n.availHeight,"portrait",t),i=O(n.availHeight,n.availWidth,"landscape",t);window.setTimeout(()=>{E.p=o(),window.setTimeout(()=>{E.l=i(),e()},10)},10)}function R(){r("iOS",JSON.stringify(E))}!function t(){const n=f.shift();if(!n)return void I(null,R);const o=new Image;o.crossOrigin="anonymous",o.onerror=()=>{t()},o.onload=()=>{o.onload=null,I(o,()=>{const t=e.background_color&&m(o,k);t?(n.href=t,E.i[o.src]=t,function(t){let e=f.length+1;const n=()=>{--e||t()};n(),f.forEach(t=>{const e=new Image;e.crossOrigin="anonymous",e.onerror=n,e.onload=()=>{e.onload=null,t.href=m(e,k,!0),E.i[e.src]=t.href,n()},e.src=t.href})}(R)):R()})},o.src=n.href}()}function p(t){const e=f(t);return{r:e[0],g:e[1],b:e[2],a:e[3]}}function f(t){const e=g();return e.fillStyle=t,e.fillRect(0,0,1,1),e.getImageData(0,0,1,1).data||[]}function h(t){const e=f(t).map(t=>{const e=t/255;return e<.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}),n=.2126*e[0]+.7152*e[1]+.0722*e[2];return Math.abs(1.05/(n+.05))>3}function m(t,e,n=!1){const o=g(t);if(o.drawImage(t,0,0),n||255!==o.getImageData(0,0,1,1).data[3])return o.globalCompositeOperation="destination-over",o.fillStyle=e,o.fillRect(0,0,t.width,t.height),o.canvas.toDataURL()}function g({width:t,height:e}={width:1,height:1}){const n=document.createElement("canvas");return n.width=t,n.height=e,n.getContext("2d")}a=a||{},"complete"===document.readyState?c():window.addEventListener("load",c)}();